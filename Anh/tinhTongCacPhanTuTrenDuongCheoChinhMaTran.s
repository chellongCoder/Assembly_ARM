 AREA RESET, DATA, READONLY 
	DCD 0X20001000
	DCD START
	ALIGN 
	;; TINH TONG CAC PHAN TU TREN DUONG CHEO CHINH
MATRIX 	DCD 3, 3, 3
		DCD 3, 2, 3
		DCD 3, 3, 4
	
 AREA LONGNN, CODE, READONLY
	ENTRY
	EXPORT START
	
;; CODE

	
START
	
;; FUNCTION 
	LDR R1 ,= MATRIX ;;GAN DIA CHI DAU TIEN CUA MA TRAN VAO R1
	MOV R2 , #0 ;;SUM R2 = 0
	MOV R3, #0 ;OFFSET (0, 4, 8,...)
	MOV R4, #0 ; INDEX ROW
	BL Func ; GOI HAM FUNC1
	
	;RESET THANH GHI
	LDR R1 ,= MATRIX ;;GAN DIA CHI DAU TIEN CUA MA TRAN VAO R1
	MOV R3, #0 ; OFFSET (0, 4, 8,...)
	MOV R4, #0 ; INDEX ROW
	MOV R5, #0 ; GIA TRI TEMP
	MOV R9, #0 ; BIEN DEM PHAN TU CHIA HET
	MOV R10, #0; BIEN LUU TONG CAC SO % 2 == 0
	BL funcChiahet;
STOP B STOP;
	
Func PROC 
	LDR R5, [R1, R3]; GAN GIA TRI R3 CHO R5
	ADD R2, R5; SUM = SUM + R5
	ADD R3, R3, #16; CONG THEM 16 DE NHAY TOI INDEX TIEP THEO O HANG THU 2
	ADD R4, #1; INDEX ROW = 1 (NHAY TW 0 -> 1)
	CMP R4, #3; (IF R4 < 3)
	BLT Func; (IF R4 > 3) -> STOP LABEL
  
	BX LR;
	ENDP;

funcChiahet PROC
	LDR R5, [R1, R3]; GAN GIA TRI R3 CHO R5
	MOV R6, #2; GAN R6 = SO CAN CHI HET CHIA
	SDIV R7, R5, R6; R7 = R5 : R6
	MLS R8, R7, R6, R5; R8 = R5-(R7 * R6)
	CMP R8, #0; IF(R8 <>= 0)
	BEQ funcDem; IF R8 == 0 
	B funcOffset; IF R8!= 0
	BX LR;
	ENDP;
	
funcDem
	ADD R9, #1; COUNT++
	ADD R10, R5; CONG R10 VAO R5
	B funcOffset;

funcOffset 
	ADD R4, #1; TANG INDEX ARRAY
	ADD R3, #4; OFFSET TANG 4
	CMP R4, #9; SO SANH VOI LENGTH MA TRAN
	BLT funcChiahet; IF R4 < 9

	;KET THUC CHUONG TRINH
	END
